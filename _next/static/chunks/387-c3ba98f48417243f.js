"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[387],{8530:function(e,t,o){o.d(t,{ZP:function(){return z},EA:function(){return J},e_:function(){return V}});var n=o(5893),r=o(7291),i=o(7294),s=o(4345),a=o(3247),l=o(3977),c=o(2393),d=o(9501),u=o(7442);let h=e=>(0,u.tm)(e),m=e=>/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),p=e=>null==e,w=e=>p(e)||0==e.length,E=(e,t)=>{if(!t)return null;let o={user:t,providerId:t.providerId,operationType:e};return o},_=e=>{switch(e){case r.F7.FACEBOOK:return"Facebook";case r.F7.GOOGLE:return"Google";case r.F7.TWITTER:return"Twitter";case r.F7.GITHUB:return"Github";default:return null}},T=()=>"FIREBASE_AUTH_FLOW_CAPTCHA_".concat(Math.round(1e6*Math.random())),I=e=>{let t=document.createElement("div"),o="".concat(T());t.setAttribute("id",o);let n=document.createElement("div");return n.setAttribute("id","".concat(o,"_PARENT")),n.setAttribute("style","width: 100vw !important; height: 50vh !important"),n.appendChild(t),document.getElementsByTagName("body")[0].appendChild(n),window.recaptchaVerifier=new r.lI(o,{size:"invisible"},e),o},g=e=>{let t=document.getElementById("".concat(e,"_PARENT"));if(t){try{window.recaptchaVerifier.clear(),delete window.recaptchaVerifier}catch(e){}document.getElementsByTagName("body")[0].removeChild(t)}},A={AUTH_FLOW_EMAIL_FOR_SIGN_IN:"AUTH_FLOW_EMAIL_FOR_SIGN_IN",AUTH_FLOW_AUTH_LINK_PENDING_CREDENTIAL:"AUTH_FLOW_AUTH_LINK_PENDING_CREDENTIAL",AUTH_FLOW_REDIRECT_CALLBACK_URL:"AUTH_FLOW_REDIRECT_CALLBACK_URL",AUTH_FLOW_REDIRECT_CALLBACK_REPLACE_URL:"AUTH_FLOW_REDIRECT_CALLBACK_REPLACE_URL",AUTH_FLOW_PHONE_OTP_SUBMITTED:"AUTH_FLOW_PHONE_OTP_SUBMITTED",AUTH_FLOW_SOCIAL_CREDENTIAL:"AUTH_FLOW_SOCIAL_CREDENTIAL",AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR:"AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR",AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR_TEMP:"AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR_TEMP",AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED:"AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED",AUTH_FLOW_PROMPT_EMAIL_SUBMITTED:"AUTH_FLOW_PROMPT_EMAIL_SUBMITTED",AUTH_FLOW_POLLING_STOP_FLAG:"AUTH_FLOW_POLLING_STOP_FLAG"},O={otpInputTitle:"otpInputTitle",otpInputPlaceholder:"otpInputPlaceholder",otpConfirmationButtonText:"otpConfirmationButtonText",emptyOtpError:"emptyOtpError",newPasswordInputTitle:"newPasswordInputTitle",newPasswordInputPlaceholder:"newPasswordInputPlaceholder",passwordRetypeInputTitle:"passwordRetypeInputTitle",passwordRetypeInputPlaceholder:"passwordRetypeInputPlaceholder",passwordConfirmationButtonText:"passwordConfirmationButtonText",passwordMismatchError:"passwordMismatchError",emptyPasswordError:"emptyPasswordError",passwordInputTitle:"passwordInputTitle",passwordInputPlaceholder:"passwordInputPlaceholder",emailInputTitle:"emailInputTitle",emailInputPlaceholder:"emailInputPlaceholder",emailConfirmationButtonText:"emailConfirmationButtonText",emptyEmailError:"emptyEmailError",emptyEmailAndPhoneError:"emptyEmailAndPhoneError",invalidEmailOrPhoneError:"invalidEmailOrPhoneError",emptyAuthError:"emptyAuthError",emptyFirestoreError:"emptyFirestoreError",emptyCustomDataCollectionPath:"emptyCustomDataCollectionPath",phoneHasNoEmailError:"phoneHasNoEmailError",noEmailVerificationCode:"noEmailVerificationCode",noEmailVerificationMode:"noEmailVerificationMode",invalidEmailVerificationCode:"invalidEmailVerificationCode",invalidEmailVerificationMode:"invalidEmailVerificationMode",credentialCollisionResolutionRequestTitle:"Account already exist.",credentialCollisionResolutionAcceptText:"Yes, link accounts",credentialCollisionResolutionDeclineText:"Cancel"},C={otpInputTitle:"Enter the code sent to your phone.",otpInputPlaceholder:"Enter code.",otpConfirmationButtonText:"Confirm OTP.",emptyOtpError:"No OTP entered.",newPasswordInputTitle:"New password.",newPasswordInputPlaceholder:"Enter new password.",passwordRetypeInputTitle:"Re-type password.",passwordRetypeInputPlaceholder:"Type password again.",passwordConfirmationButtonText:"Update password.",passwordMismatchError:"Your password doesn't match.",emptyPasswordError:"No password provided.",passwordInputTitle:"Password.",passwordInputPlaceholder:"Enter your password.",emailInputTitle:"Enter",emailInputPlaceholder:"Enter your email address",emailConfirmationButtonText:"Sign in",emptyEmailError:"No email provided.",emptyEmailAndPhoneError:"Please provide a email address or phone number",invalidEmailOrPhoneError:"Please provide a valid email address or phone number",emptyAuthError:"Firebase Auth is empty.",emptyFirestoreError:"Firebase Firestore is empty.",emptyCustomDataCollectionPath:"customDataCollectionPath is empty.",phoneHasNoEmailError:"No email address has been linked to your phone number. Please sign up first.",noEmailVerificationCode:"No email verification code.",noEmailVerificationMode:"No email verification mode.",invalidEmailVerificationCode:"Invalid email verification code.",invalidEmailVerificationMode:"Invalid email verification mode."},P="recaptcha-container";var R=o(3100);let S={promptPollInterval:200,messages:C,recaptchaContainerId:P,customDataCollectionPath:void 0,firestore:void 0},f=(e,t)=>{let[o,u]=(0,i.useState)(),[h,m]=(0,i.useState)(!1),[p,_]=(0,i.useState)(),[T,C]=(0,i.useState)(),[P,f]=(0,i.useState)(),[L,x]=(0,i.useState)(),[v,y]=(0,i.useState)(S);(0,i.useEffect)(()=>{y({...S,...t||{}})},[t]);let U=(t,o,n,i,s,a,c,d)=>new Promise((u,h)=>{if(e){if(n){if(e.currentUser){let r=E("signIn",e.currentUser);w(e.currentUser.phoneNumber)||e.currentUser.phoneNumber!==n?u(r):w(e.currentUser.email)&&o&&t?W(r,o,t,a).then(e=>{B(e,i,s).then(e=>{u(e)}).catch(t=>{u(e)})}).catch(e=>{h(e)}):a&&j(r,a,c,d).then(e=>{B(e,i,s).then(e=>{u(e)}).catch(t=>{u(e)})}).catch(e=>{h(e)})}else{let r;L?r=L:x(r=I(e)),window.recaptchaVerifier.verify().then(()=>{F(n,window.recaptchaVerifier,o,t,a,c,d).then(e=>{B(e,i,s).then(e=>{g(r),x(void 0),u(e)}).catch(t=>{g(r),x(void 0),u(e)})}).catch(e=>{g(r),x(void 0),h(e)})}).catch(e=>{g(r),x(void 0),h(e)})}}else if(o&&t){if(e.currentUser){let t=E("signIn",e.currentUser);a?j(t,a,c,d).then(e=>{B(e,i,s).then(e=>{u(e)}).catch(t=>{u(e)})}).catch(e=>{h(e)}):B(t,i,s).then(e=>{u(e)}).catch(e=>{u(t)})}else(0,r.Xb)(e,o,t).then(e=>{(0,r.w$)(e.user),a?j(e,a,c,d).then(e=>{u(e)}).catch(e=>{h(e)}):u(e)}).catch(e=>{h(e)})}else n||o?t||h(new l.ZR(O.emptyPasswordError,v.messages[O.emptyPasswordError])):h(new l.ZR(O.emptyEmailAndPhoneError,v.messages[O.emptyEmailAndPhoneError]))}else h(new l.ZR(O.emptyAuthError,v.messages[O.emptyAuthError]))}),F=(t,o,n,i,s,a,c)=>new Promise((d,u)=>{t&&e&&o?(0,r.$g)(e,t,o).then(e=>{D(e,n,i,s,a,c).then(e=>{d(e)}).catch(e=>{u(e)})}).catch(e=>{u(e)}):e||u(new l.ZR(O.emptyAuthError,v.messages[O.emptyAuthError]))}),D=(e,t,o,n,r,i)=>new Promise(async(s,a)=>{N().then(l=>{M(),e.confirm(l).then(e=>{t&&o?W(e,t,o,n,r,i).then(e=>{u(!0),s(e)}).catch(e=>{a(e)}):n?j(e,n,r,i).then(e=>{s(e)}).catch(e=>{a(e)}):s(e)}).catch(e=>{a(e)})}).catch(e=>{M(),a(e)})}),N=()=>new Promise((e,t)=>{m(!0),H(e,t)}),H=(e,t)=>{let o=window.sessionStorage.getItem(A.AUTH_FLOW_PHONE_OTP_SUBMITTED);console.log("pollOtp:otpRequestDone.otp",o),o?w(o)?t(new l.ZR(O.emptyOtpError,v.messages[O.emptyOtpError])):e(o):setTimeout(()=>{H(e,t)},v.promptPollInterval)},M=()=>{_(void 0),m(!1),C(!1),window.sessionStorage.removeItem(A.AUTH_FLOW_PHONE_OTP_SUBMITTED)},W=(t,o,n,i,s,a)=>new Promise((l,c)=>{let d=r.w9.credential(o,n);t.user.email?l(t):(0,r.ZJ)(t.user,d).then(t=>{u(!0),i?j(t,i,s,a).then(e=>{l(e)}).catch(t=>{null==e||e.signOut(),c(t)}):l(t)}).catch(t=>{null==e||e.signOut(),c&&c(t)})}),j=(e,t,o,n)=>new Promise((r,i)=>{if((n||v.firestore)&&(o||v.customDataCollectionPath)){let s=(0,a.JU)(n||v.firestore,o||v.customDataCollectionPath,e.user.uid);(0,a.QT)(s).then(o=>{o.exists()?r(e):(0,a.pl)(s,{...t,uid:e.user.uid}).then(()=>{u(!0),r(e)}).catch(e=>{i(e)})}).catch(e=>{i(e)})}else n&&v.firestore?o&&v.customDataCollectionPath||i(new l.ZR(O.emptyCustomDataCollectionPath,v.messages[O.emptyCustomDataCollectionPath])):i(new l.ZR(O.emptyFirestoreError,v.messages[O.emptyFirestoreError]))}),b=(e,t,o,n)=>new Promise((r,i)=>{if((n||v.firestore)&&(o||v.customDataCollectionPath)){let s=(0,a.JU)(n||v.firestore,o||v.customDataCollectionPath,e.uid);(0,a.pl)(s,{...t,uid:e.uid},{merge:!0}).then(()=>{r(e)}).catch(e=>{i(e)})}else n&&v.firestore?o&&v.customDataCollectionPath||i(new l.ZR(O.emptyCustomDataCollectionPath,v.messages[O.emptyCustomDataCollectionPath])):i(new l.ZR(O.emptyFirestoreError,v.messages[O.emptyFirestoreError]))}),B=(e,t,o)=>new Promise((n,i)=>{if(w(t)&&w(o))n(e);else{let s={};t&&!w(t)&&(s.displayName=t),o&&!w(o)&&(s.photoURL=o),(0,r.ck)(e.user,s).then(()=>{n(e)}).catch(e=>{i(e)})}}),Z=()=>{f(""),p&&0!=p.length?window.sessionStorage.setItem(A.AUTH_FLOW_PHONE_OTP_SUBMITTED,p):f(v.messages[O.emptyOtpError])},k=()=>(0,n.jsx)(R.xu,{children:h?(0,n.jsxs)(s.Z,{title:v.messages[O.otpInputTitle],isOpen:!0,onClose:()=>{_(void 0),window.sessionStorage.setItem(A.AUTH_FLOW_PHONE_OTP_SUBMITTED,"")},children:[(0,n.jsx)(c.Z,{tpe:c.Z.TYPES.text,mb:4,title:v.messages[O.otpInputTitle],placeholder:v.messages[O.otpInputPlaceholder],value:p,onChange:e=>{_(e)},errorMessage:P}),(0,n.jsx)(d.Z,{onClick:Z,loading:!w(p)&&T,children:v.messages[O.otpConfirmationButtonText]})]}):null});return{signUp:U,updateCustomData:b,onSignUpPrompt:k}};var L=o(2752),x=o(1963),v=o(1948),y=o(4504),U=o(8911),F=o(4641),D=o(3793),N=o(7018),H=o(9583);let M=e=>{let{bg:t,color:o,children:r,placement:i,onClose:s,isOpen:a,isClosable:l,title:c,footer:d,hideModeSwitch:u,h,height:m,...p}=e;return(0,n.jsxs)(L.u_,{onClose:s||(()=>{}),isOpen:a,isCentered:!0,children:[(0,n.jsx)(x.Z,{}),(0,n.jsxs)(v.h,{bg:t,color:o,minH:h||m||"50vh",w:{base:"95%",md:"650px"},borderRadius:"16px !important",children:[(0,n.jsxs)(y.x,{borderBottomWidth:"1px",w:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,n.jsx)(U.x,{as:"div",fontSize:{base:"1.1rem",md:"1.3rem"},textTransform:"capitalize",children:c}),(0,n.jsx)(F.U,{children:s&&(l||void 0===l)?(0,n.jsx)(R.xu,{onClick:s,cursor:"pointer",display:"block",children:(0,n.jsx)(H.aHS,{size:"24px"})}):null})]}),(0,n.jsx)(D.f,{...p,children:r}),(0,n.jsx)(N.m,{children:d})]})]})},W={promptPollInterval:200,messages:C,recaptchaContainerId:P,actionCodeSettings:void 0,sendEmailVerificationLink:!1},j=(e,t)=>{let[o,s]=(0,i.useState)(!1),[a,u]=(0,i.useState)(),[p,E]=(0,i.useState)(),[_,T]=(0,i.useState)(),[C,P]=(0,i.useState)(),[S,f]=(0,i.useState)(W);(0,i.useEffect)(()=>{t=t||{};let e={...t};if(!t.actionCodeSettings||w(t.actionCodeSettings.url)){var o;e.actionCodeSettings={...t.actionCodeSettings||{},url:null==window?void 0:null===(o=window.location)||void 0===o?void 0:o.href}}f({...W,...e})},[t]);let L=(t,o,n)=>new Promise((i,s)=>{if(e){if(h(t)){let n;C?n=C:P(n=I(e)),window.recaptchaVerifier.verify().then(()=>{x(t,window.recaptchaVerifier,o).then(e=>{g(n),P(void 0),i(e)}).catch(e=>{g(n),P(void 0),s(e)})}).catch(e=>{g(n),P(void 0),s(e)})}else m(t)?o&&0!=o.length?D(t,o).then(e=>{let t=e.user;!t.emailVerified&&S.sendEmailVerificationLink?(0,r.w$)(t,n||S.actionCodeSettings).then(()=>{i(e)}).catch(e=>{s(e)}):i(e)}).catch(e=>{s(e)}):(0,r.oo)(e,t,n||S.actionCodeSettings).then(()=>{window.localStorage.setItem(A.AUTH_FLOW_EMAIL_FOR_SIGN_IN,t),i(null)}).catch(e=>{s(e)}):s(new l.ZR(O.invalidEmailOrPhoneError,S.messages[O.invalidEmailOrPhoneError]))}else s(new l.ZR(O.emptyAuthError,S.messages[O.emptyAuthError]))}),x=(t,o,n)=>new Promise((i,s)=>{t&&e&&o?(console.log("signIn:onRecaptchaResult.1","phone",t,"auth",e,"appVerifier",o),(0,r.$g)(e,t,o).then(r=>{console.log("signIn:onRecaptchaResult.2","phone",t,"auth",e,"appVerifier",o),v(r,n).then(n=>{console.log("signIn:onRecaptchaResult.3","phone",t,"auth",e,"appVerifier",o),i(n)}).catch(n=>{console.log("signIn:onRecaptchaResult.4","phone",t,"auth",e,"appVerifier",o,"error",n),s(n)})}).catch(n=>{console.log("signIn:onRecaptchaResult.5","phone",t,"auth",e,"appVerifier",o,"error",n),s(n)})):e?console.log("signIn:onRecaptchaResult.7","phone",t,"auth",e,"appVerifier",o):(console.log("signIn:onRecaptchaResult.6","phone",t,"auth",e,"appVerifier",o),s(new l.ZR(O.emptyAuthError,S.messages[O.emptyAuthError])))}),v=(t,o)=>new Promise(async(n,r)=>{console.log("signIn:onConfirmationResult.","result",t,"password",o),y().then(i=>{console.log("signIn:onConfirmationResult.","result",t,"password",o),F(),console.log("signIn:onConfirmationResult.","result",t,"password",o),t.confirm(i).then(t=>{console.log("signIn:onConfirmationResult.","result",t,"password",o);let i=t.user;o&&e?i.email&&m(i.email)?D(i.email,o).then(e=>{n(e)}).catch(t=>{e.signOut().then(()=>{r(t)}).catch(e=>{r(e)})}):e.signOut().then(()=>{r(new l.ZR(O.phoneHasNoEmailError,S.messages[O.phoneHasNoEmailError]))}).catch(e=>{r(e)}):n(t)}).catch(e=>{console.log("signIn:onConfirmationResult.","result",t,"password",o,"error",e),r(e)})}).catch(e=>{F(),console.log("signIn:onConfirmationResult.","result",t,"password",o,"error",e),r(e)})}),y=()=>new Promise((e,t)=>{s(!0),U(e,t)}),U=(e,t)=>{let o=window.sessionStorage.getItem(A.AUTH_FLOW_PHONE_OTP_SUBMITTED);console.log("pollOtp:otpRequestDone.otp",o,o?"true":"false"),o?w(o)?t(new l.ZR(O.emptyOtpError,S.messages[O.emptyOtpError])):e(o):setTimeout(()=>{U(e,t)},S.promptPollInterval)},F=()=>{u(void 0),s(!1),E(!1),window.sessionStorage.removeItem(A.AUTH_FLOW_PHONE_OTP_SUBMITTED)},D=(t,o)=>new Promise((n,i)=>{e?(0,r.e5)(e,t,o).then(e=>{n(e)}).catch(e=>{i(e)}):i(new l.ZR(O.emptyAuthError,S.messages[O.emptyAuthError]))}),N=()=>{T(""),a&&0!=a.length?window.sessionStorage.setItem(A.AUTH_FLOW_PHONE_OTP_SUBMITTED,a):T(S.messages[O.emptyOtpError])},H=()=>(0,n.jsx)(R.xu,{children:o?(0,n.jsxs)(M,{title:S.messages[O.otpInputTitle],isOpen:!0,onClose:()=>{u(void 0),window.sessionStorage.setItem(A.AUTH_FLOW_PHONE_OTP_SUBMITTED,"")},children:[(0,n.jsx)(c.Z,{tpe:c.Z.TYPES.text,mb:4,title:S.messages[O.otpInputTitle],placeholder:S.messages[O.otpInputPlaceholder],value:a,onChange:e=>{u(e)},errorMessage:_}),(0,n.jsx)(d.Z,{onClick:N,loading:!w(a)&&p,children:S.messages[O.otpConfirmationButtonText]})]}):null});return{signIn:L,onSignInPrompt:H}},b=e=>{var t=e||"";if(!t.includes("?"))return{};{t=t.substring(t.indexOf("?")+1);let e=JSON.parse('{"'+decodeURI(t).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}');return e}};function B(){let[e,t]=(0,i.useState)({});return(0,i.useEffect)(()=>{if(window.location.href){let e=b(window.location.href);t(e||{})}},[]),e}var Z=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,s=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,[u,h]=(0,i.useState)(C);(0,i.useEffect)(()=>{h({...C,...t||{}})},[t]);let m=B();(0,i.useEffect)(()=>{e&&(0,r.JB)(e,window.location.href)&&L()},[m&&e]);let[p,E]=(0,i.useState)(),[_,T]=(0,i.useState)(!1),[I,g]=(0,i.useState)(),[P,R]=(0,i.useState)(),[S,f]=(0,i.useState)(),L=()=>{e?(E("signInWithEmailLink"),x().then(t=>{y(),(0,r.P6)(e,t,window.location.href).then(e=>{E(null),s&&s(m,e)}).catch(e=>{E(null),a&&a(m,e)})}).catch(e=>{E(null),y(),a&&a(m,e)})):a&&a(m,new l.ZR(O.emptyAuthError,u[O.emptyAuthError]))},x=()=>new Promise((e,t)=>{let o=window.localStorage.getItem(A.AUTH_FLOW_EMAIL_FOR_SIGN_IN);o&&o.length>0?(window.localStorage.removeItem(A.AUTH_FLOW_EMAIL_FOR_SIGN_IN),e(o)):(T(!0),v(e,t))}),v=(e,t)=>{let n=window.sessionStorage.getItem(A.AUTH_FLOW_PROMPT_EMAIL_SUBMITTED);console.log("pollEmail:email",n),n?n&&!w(n)?e(n):t(new l.ZR(O.emptyEmailError,u[O.emptyEmailError])):setTimeout(()=>{v(e,t)},o)},y=()=>{T(!1),g(void 0),f(!1),window.sessionStorage.removeItem(A.AUTH_FLOW_PROMPT_EMAIL_SUBMITTED)},U=()=>{R(""),w(I)?R(u[O.emptyEmailError]):(window.sessionStorage.setItem(A.AUTH_FLOW_PROMPT_EMAIL_SUBMITTED,I),f(!0))},F=()=>_?(0,n.jsxs)(M,{title:u[O.emailInputTitle],isOpen:!0,onClose:()=>{g(void 0),window.sessionStorage.setItem(A.AUTH_FLOW_PROMPT_EMAIL_SUBMITTED,"")},children:[(0,n.jsx)(c.Z,{tpe:c.Z.TYPES.text,mb:4,title:u[O.emailInputTitle],placeholder:u[O.emailInputPlaceholder],value:I,onChange:e=>{g(e)},errorMessage:P}),(0,n.jsx)(d.Z,{onClick:U,loading:!w(I)&&S,children:u[O.emailConfirmationButtonText]})]}):null;return{pendingEmailSignInCallback:p,onEmailSignInCallbackPrompt:F}};let k={verifyEmail:"verifyEmail",recoverEmail:"recoverEmail",resetPassword:"resetPassword"};var V=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,s=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,h=arguments.length>6?arguments[6]:void 0,{pendingEmailSignInCallback:m,onEmailSignInCallbackPrompt:p}=Z(e,t,o,s,a),[_,T]=(0,i.useState)(C);(0,i.useEffect)(()=>{T({...C,...t||{}})},[t]);let I=B();(0,i.useEffect)(()=>{e&&(I.oobCode?j(I.oobCode,I.mode):a&&a(I,new l.ZR(O.noEmailVerificationCode,_[O.noEmailVerificationCode])))},[I&&e]);let[g,P]=(0,i.useState)(),[S,f]=(0,i.useState)(!1),[L,x]=(0,i.useState)(),[v,y]=(0,i.useState)(),[U,F]=(0,i.useState)(),[D,N]=(0,i.useState)(),[H,W]=(0,i.useState)(),j=(e,t)=>{switch(t){case k.verifyEmail:b(e);break;case k.recoverEmail:V(e);break;case k.resetPassword:G(e);break;default:if(a){let e=w(t)?new l.ZR(O.noEmailVerificationMode,_[O.noEmailVerificationMode]):new l.ZR(O.invalidEmailVerificationMode,_[O.invalidEmailVerificationMode]);a(I,e)}}},b=t=>{e?(P(I.mode),(0,r.iA)(e,t).then(()=>{P(null),s&&s(I,E("link",e.currentUser))}).catch(e=>{P(null),a&&a(I,e)})):a&&a(I,new l.ZR(O.emptyAuthError,_[O.emptyAuthError]))},V=t=>{e?(P(I.mode),(0,r.bX)(e,t).then(o=>{P(null);let n=o.data.email;(0,r.iA)(e,t).then(()=>{h&&n?(0,r.LS)(e,n).then(()=>{P(null),s&&s(I,E("link",e.currentUser))}).catch(e=>{P(null),a&&a(I,e)}):(P(null),s&&s(I,E("link",e.currentUser)))}).catch(e=>{P(null),a&&a(I,e)})}).catch(e=>{P(null),a&&a(I,e)})):a&&a(I,new l.ZR(O.emptyAuthError,_[O.emptyAuthError]))},G=t=>{e?(P(I.mode),(0,r.TX)(e,t).then(o=>{J().then(n=>{z(),(0,r.LG)(e,t,n).then(()=>{(0,r.e5)(e,o,n).then(e=>{P(null),s&&s(I,e)}).catch(e=>{P(null),a&&a(I,e)})}).catch(e=>{P(null),a&&a(I,e)})}).catch(e=>{P(null),z(),a&&a(I,e)})}).catch(e=>{P(null),a&&a(I,e)})):a&&a(I,new l.ZR(O.emptyAuthError,_[O.emptyAuthError]))},J=()=>new Promise((e,t)=>{f(!0),K(e,t)}),K=(e,t)=>{let n=window.sessionStorage.getItem(A.AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED);console.log("pollPassword:password",n),n?n&&!w(n)?e(n):t(new l.ZR(O.emptyPasswordError,_[O.emptyPasswordError])):setTimeout(()=>{K(e,t)},o)},z=()=>{f(!1),x(void 0),W(!1),window.sessionStorage.removeItem(A.AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED)},Y=()=>{F(""),N("")},q=()=>{Y(),w(L)?F(_[O.emptyPasswordError]):w(v)?N(_[O.emptyPasswordError]):L===v||u?(window.sessionStorage.setItem(A.AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED,L),W(!0)):N(_[O.passwordMismatchError])},$=()=>S?(0,n.jsxs)(R.xu,{children:[S?(0,n.jsxs)(M,{title:_[O.newPasswordInputTitle],isOpen:!0,onClose:()=>{x(void 0),window.sessionStorage.setItem(A.AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED,"")},children:[(0,n.jsx)(c.Z,{tpe:c.Z.TYPES.password,mb:4,title:_[O.newPasswordInputTitle],placeholder:_[O.newPasswordInputPlaceholder],value:L,onChange:e=>{x(e)},errorMessage:U}),u?null:(0,n.jsx)(c.Z,{tpe:c.Z.TYPES.password,mb:4,title:_[O.passwordRetypeInputTitle],placeholder:_[O.passwordRetypeInputPlaceholder],value:L,onChange:e=>{y(e)},errorMessage:D}),(0,n.jsx)(d.Z,{onClick:q,loading:!w(L)&&H,children:_[O.passwordConfirmationButtonText]})]}):null,p()]}):null;return{pendingCallback:g||m,onCallbackPrompt:$}},G=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:J,a=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,[h,m]=(0,i.useState)(C);(0,i.useEffect)(()=>{m({...C,...t||{}})},[t]);let[p,_]=(0,i.useState)(!1),[T,I]=(0,i.useState)(),[g,P]=(0,i.useState)(),[R,S]=(0,i.useState)(),[f,L]=(0,i.useState)(),[x,v]=(0,i.useState)(""),[y,D]=(0,i.useState)(""),[N,H]=(0,i.useState)();(0,i.useEffect)(()=>{if(e){let t=(0,r.Aj)(e,t=>{if(t){let e=window.sessionStorage.getItem(A.AUTH_FLOW_AUTH_LINK_PENDING_CREDENTIAL);if(e&&t.email){window.sessionStorage.removeItem(A.AUTH_FLOW_AUTH_LINK_PENDING_CREDENTIAL);try{let o=r.jh.fromJSON(e);(0,r.ZJ)(t,o).then(n=>{console.log("PendingUserCredLinked:userCredential",n,"currentUser",t,"pendingCred",o,"pendingCredJSon",JSON.parse(e)),a?(W(),a(n)):j()}).catch(n=>{console.log("PendingUserCredLinked:error1",n,"currentUser",t,"pendingCred",o,"pendingCredJSon",JSON.parse(e)),u&&u(n)})}catch(e){console.log("PendingUserCredLinked:error2",e),u&&u(e)}}else a?(W(),a(E("signIn",t))):j()}else(0,r.cx)(e).catch(e=>{z(e).catch(e=>{u&&u(e)})})});return()=>{t()}}},[e]);let W=()=>{try{window.sessionStorage.removeItem(A.AUTH_FLOW_REDIRECT_CALLBACK_URL)}catch(e){}},j=()=>{let e=window.sessionStorage.getItem(A.AUTH_FLOW_REDIRECT_CALLBACK_URL);e&&(window.sessionStorage.removeItem(A.AUTH_FLOW_REDIRECT_CALLBACK_URL),window.location.href=e)},b=(t,o,n)=>e?o?K(e,t,n):B(e,t):new Promise((e,t)=>{t(new l.ZR(O.emptyAuthError,h[O.emptyAuthError]))}),B=(e,t)=>(Z(e,t),new Promise((e,t)=>{k().then(t=>{G(),e(t)}).catch(e=>{G(),t(e)})})),Z=(e,t)=>{(0,r.rh)(e,t).then(e=>{window.sessionStorage.setItem(A.AUTH_FLOW_SOCIAL_CREDENTIAL,JSON.stringify(e))}).catch(e=>{z(e,!0).then(e=>{window.sessionStorage.setItem(A.AUTH_FLOW_SOCIAL_CREDENTIAL,JSON.stringify(e))}).catch(e=>{window.sessionStorage.setItem(A.AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR,JSON.stringify(e))})})},k=()=>new Promise((e,t)=>{V(e,t)}),V=(e,t)=>{let n=window.sessionStorage.getItem(A.AUTH_FLOW_SOCIAL_CREDENTIAL),r=window.sessionStorage.getItem(A.AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR);console.log("pollOtp:otpRequestDone.credential",n,"credentialError",r),n||r?n?e(JSON.parse(n)):r&&t(JSON.parse(r)):setTimeout(()=>{V(e,t)},o)},G=()=>{window.sessionStorage.removeItem(A.AUTH_FLOW_SOCIAL_CREDENTIAL),window.sessionStorage.removeItem(A.AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR)},K=(e,t,o)=>(o&&window.sessionStorage.setItem(A.AUTH_FLOW_REDIRECT_CALLBACK_URL,o),(0,r.F6)(e,t)),z=(t,o)=>new Promise((n,i)=>{if(e&&"auth/account-exists-with-different-credential"===t.code){var s=t.credential;let a=t.email;(0,r.Nr)(e,a).then(l=>{"password"===l[0]?$().then(t=>(Q(),(0,r.e5)(e,a,t))).then(e=>(0,r.ZJ)(e.user,s)).then(e=>{n(e)}).catch(e=>{i(e)}):(v(s.providerId),D(l[0]),q(l[0])?Y(s,n,i,t,o):i(t))})}else i(t)}),Y=(e,t,o,n,r)=>{window.sessionStorage.setItem(A.AUTH_FLOW_AUTH_LINK_PENDING_CREDENTIAL,JSON.stringify(e.toJSON())),window.sessionStorage.setItem(A.AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR_TEMP,JSON.stringify(n)),r?(window.resolutionResolve=t,window.resolutionReject=o):H(!0),L(!0)},q=e=>{switch(e){case r.F7.FACEBOOK:return new r._O;case r.F7.GOOGLE:return new r.hJ;case r.F7.TWITTER:return new r.c4;case r.F7.GITHUB:return new r.GH;default:return null}},$=()=>new Promise((e,t)=>{_(!0),X(e,t)}),X=(e,t)=>{let n=window.sessionStorage.getItem(A.AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED);console.log("pollPassword:password",n),n?w(n)?t(new l.ZR(O.emptyPasswordError,h[O.emptyPasswordError])):e(n):setTimeout(()=>{X(e,t)},o)},Q=()=>{_(!1),I(void 0),S(!1),window.sessionStorage.removeItem(A.AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED)},ee=()=>{P(""),w(T)?P(h[O.emptyPasswordError]):(window.sessionStorage.setItem(A.AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED,T),S(!0))},et=()=>p?(0,n.jsxs)(M,{title:h[O.passwordInputTitle],isOpen:!0,onClose:()=>{I(void 0),window.sessionStorage.setItem(A.AUTH_FLOW_PROMPT_PASSWORD_SUBMITTED,"")},children:[(0,n.jsx)(c.Z,{tpe:c.Z.TYPES.password,mb:4,title:h[O.passwordInputTitle],placeholder:h[O.passwordInputPlaceholder],value:T,onChange:e=>{I(e)},errorMessage:g}),(0,n.jsx)(d.Z,{onClick:ee,loading:!w(T)&&R,children:h[O.passwordConfirmationButtonText]})]}):null,eo=()=>{L(void 0),S(!0);let e=window.sessionStorage.getItem(A.AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR_TEMP);e&&window.sessionStorage.setItem(A.AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR,e)},en=()=>f?(0,n.jsxs)(M,{title:h[O.credentialCollisionResolutionRequestTitle],isOpen:!0,onClose:eo,children:[(0,n.jsx)(U.x,{as:"div",mb:4,children:s(x,y)}),(0,n.jsxs)(F.U,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,n.jsx)(d.Z,{onClick:()=>{let t=q(y);e&&t&&(N?K(e,t):((0,r.rh)(e,t).then(e=>{window.sessionStorage.setItem(A.AUTH_FLOW_SOCIAL_CREDENTIAL,JSON.stringify(e))}).catch(e=>{window.sessionStorage.setItem(A.AUTH_FLOW_SOCIAL_CREDENTIAL_ERROR,JSON.stringify(e))}),L(!1)))},loading:!w(T)&&R,children:h[O.credentialCollisionResolutionAcceptText]}),(0,n.jsx)(d.Z,{onClick:eo,loading:!w(T)&&R,children:h[O.credentialCollisionResolutionDeclineText]})]})]}):null,er=()=>(0,n.jsxs)(n.Fragment,{children:[et(),en()]}),ei=(e,t)=>b(new r._O,e,t),es=(e,t)=>b(new r.hJ,e,t),ea=(e,t)=>b(new r.c4,e,t),el=(e,t)=>b(new r.GH,e,t);return{socialSignIn:b,socialSignInPopUp:B,socialSignInRedirect:K,faceBookSignIn:ei,googleSignIn:es,twitterSignIn:ea,githubSignIn:el,handleAuthErrors:z,onSocialSignInPrompt:er}};let J=(e,t)=>{let o=_(e),r=_(t);return(0,n.jsx)(U.x,{as:"div",textAlign:"center",children:o&&r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.x,{children:"An error occurred because there is a ".concat(r," account with the same email address as this ").concat(o," account.")}),(0,n.jsx)(U.x,{children:"Would you like to link the two accounts to resolve the error?"})]}):o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.x,{children:"An error occurred because there is an account with the same email address as this ".concat(o," account.")}),(0,n.jsx)(U.x,{children:"Would you like to link the two accounts to resolve the error?"})]}):r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.x,{children:"An error occurred because there is a ".concat(r," account with the same email address as this account.")}),(0,n.jsx)(U.x,{children:"Would you like to link the two accounts to resolve the error?"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.x,{children:"An error occurred because there an account with the same email address as this account."}),(0,n.jsx)(U.x,{children:"Would you like to link the two accounts to resolve the error?"})]})})},K=(e,t)=>{let{socialSignIn:o,socialSignInPopUp:i,socialSignInRedirect:s,faceBookSignIn:a,googleSignIn:c,twitterSignIn:d,githubSignIn:u,onSocialSignInPrompt:h}=G(e,null==t?void 0:t.messages,null==t?void 0:t.promptPollInterval,null==t?void 0:t.onCredentialResolutionRequestMessage),{signUp:m,onSignUpPrompt:p}=f(e,t),{signIn:E,onSignInPrompt:_}=j(e,t),{pendingCallback:T,onCallbackPrompt:I}=V(e,null==t?void 0:t.messages,null==t?void 0:t.promptPollInterval,null==t?void 0:t.onCallbackSuccess,null==t?void 0:t.onCallbackFailure,null==t?void 0:t.skipPasswordRetype,null==t?void 0:t.sendPasswordResetEmailOnEmailRecovered),g=(o,n)=>new Promise((i,s)=>{if(e){var a,c;let l={...(null==t?void 0:t.actionCodeSettings)||{},...n||{},url:null==window?void 0:null===(a=window.location)||void 0===a?void 0:a.href};if(w(l.url))e:null==window||null===(c=window.location)||void 0===c||c.href;(0,r.LS)(e,o,l).then(()=>{i(null)}).catch(e=>{s(e)})}else s(new l.ZR(O.emptyAuthError,((null==t?void 0:t.messages)||C)[O.emptyAuthError]))}),A=()=>(0,n.jsxs)(n.Fragment,{children:[p(),_(),h(),I()]});return{signUp:m,signIn:E,resetPassword:g,socialSignIn:o,socialSignInPopUp:i,socialSignInRedirect:s,faceBookSignIn:a,googleSignIn:c,twitterSignIn:d,githubSignIn:u,onAuthPrompt:A,pendingCallback:T}};var z=K},9501:function(e,t,o){var n=o(5893),r=o(2498),i=o(9222),s=o(4641),a=o(3100),l=o(8911),c=o(3136);let d=e=>{let{as:t,onClick:o,children:d,variant:u,bgColor:h,outlineColor:m,leftIcon:p,rightIcon:w,loading:E,disabled:_,...T}=e,I=h||(0,r.ff)("colorAccent.light","colorAccent.dark"),g=m||(0,r.ff)("colorAccentDestination.light","colorAccentDestination.dark");return(0,n.jsx)(i.z,{as:t||"button",cursor:"pointer",disabled:_||E,onClick:e=>{o&&!(_||E)&&o(e)},display:"inline-flex",justifyContent:"center",alignItems:"center",p:"0px 24px",h:"48px",letterSpacing:"0.03em",textAlign:"center",borderRadius:"16px",bg:"outline"==u?"transparent":I,border:"outline"==u?"2px solid":"none",borderColor:"outline"==u?g:"transparent",color:"outline"==u?g:"#fff",boxShadow:"ghost"==u||"outline"==u?"none":"rgb(14 14 44 / 40%) 0px -1px 0px 0px inset",opacity:"ghost"==u?"0.8":"1",transition:"background-color 0.2s ease 0s, opacity 0.2s ease 0s",_hover:{opacity:"0.65",border:"none !important"},_disabled:{opacity:"0.65",cursor:"not-allowed"},...T,children:(0,n.jsxs)(s.U,{justifyContent:"center",alignItems:"center",children:[p?(0,n.jsx)(a.xu,{mr:"7px",children:p}):null,(0,n.jsx)(l.x,{as:"div",children:d}),E?(0,n.jsx)(a.xu,{as:c.g4,display:"inline",width:"20%",height:"20%",color:"#fff"}):w?(0,n.jsx)(a.xu,{ml:"7px",children:w}):null]})})};t.Z=d},4345:function(e,t,o){var n=o(5893),r=o(2752),i=o(1963),s=o(1948),a=o(4504),l=o(8911),c=o(4641),d=o(3100),u=o(3793),h=o(7018),m=o(9583);let p=e=>{let{bg:t,color:o,children:p,placement:w,onClose:E,isOpen:_,isClosable:T,title:I,footer:g,hideModeSwitch:A,h:O,height:C,...P}=e;return(0,n.jsxs)(r.u_,{onClose:E||(()=>{}),isOpen:_,isCentered:!0,children:[(0,n.jsx)(i.Z,{}),(0,n.jsxs)(s.h,{bg:t,color:o,minH:O||C||"50vh",maxH:"70vh",w:{base:"95%",md:"650px"},borderRadius:"16px !important",children:[(0,n.jsxs)(a.x,{borderBottomWidth:"1px",w:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,n.jsx)(l.x,{as:"div",fontSize:{base:"1.1rem",md:"1.3rem"},textTransform:"capitalize",children:I}),(0,n.jsx)(c.U,{children:E&&(T||void 0===T)?(0,n.jsx)(d.xu,{onClick:E,cursor:"pointer",display:"block",children:(0,n.jsx)(m.aHS,{size:"24px"})}):null})]}),(0,n.jsx)(u.f,{...P,children:p}),g?(0,n.jsx)(h.m,{children:g}):null]})]})};t.Z=p},574:function(e,t,o){var n=o(5893),r=o(9583);t.Z=[{title:"Whatsapp",forceMobileDisplay:!0,href:"/whatsapp"},{title:"Sign Up",forceMobileDisplay:!0,href:"/register",onIcon:()=>(0,n.jsx)(r.AOB,{})}]},2209:function(e,t,o){var n=o(5893),r=o(9583),i=o(6455),s=o.n(i);t.Z=[{title:"Home",href:"/",onIcon:()=>(0,n.jsx)(r.xng,{})},{title:"Saved",href:"/saved",onIcon:()=>(0,n.jsx)(r.VF9,{})},{title:"Meet",href:"#",onIcon:()=>(0,n.jsx)(r.VNu,{}),onClick:(e,t)=>{e.preventDefault(),(null==t?void 0:t.showMeetView)&&t.showMeetView()}},{title:"Chat",href:"/chat",onIcon:()=>(0,n.jsx)(r.DCG,{}),onClick:(e,t)=>{e.preventDefault(),s().fire({text:"Please sign in first.",icon:"info",confirmButtonText:"Sign In",cancelButtonText:"Cancel",showConfirmButton:!0,showCancelButton:!0}).then(e=>{e.isConfirmed&&(null==t?void 0:t.router)&&t.router.push("/login")})}},{title:"Sign In",href:"/login",onIcon:()=>(0,n.jsx)(r.IPB,{})}]}}]);